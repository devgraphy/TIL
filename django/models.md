해당 문서의 목표

- Django model 개요
- ORM 역할
- model 수정 방법





# Django model

장고는 모델로 데이터를 관리한다. 

모델로 데이터를 관리한다는 의미는? 보통 웹 개발에서는 데이터의 저장, 조회를 위해 SQL 쿼리문을 이용한다. 이 말은 데이터 저장, 조회를 위해서는 별도의 SQL 쿼리문을 배워야 한다는 말과 같다. 학습 장벽이 하나 더 생기는 셈이다. 하지만 놀랍게도 모델을 사용하면 SQL 쿼리문을 몰라도 데이터를 저장, 조회할 수 있다.



# DB browser for SQLite 살펴보기

SQLite의 GUI 도구 (그래픽 도구)인 'DB Browser for SQLite'를 설치하면 데이터베이스의 테이블을 확인할 수 있다.

다운로드: [sqlitebrowser.org/dl](https://sqlitebrowser.org/dl)



화면에 뭔가 많이 나타나지만, 테이블의 내용을 자세히 볼 필요 없다. 왜냐하면 장고는 테이블 작업을 위한 쿼리문을 알아서 수행하기 때문이다.









# ORM(Object-Oriented-Mapping)

**장고의 ORM은 쿼리문을 몰라도 데이터 작업을 할 수 있다**

쿼리문이란 데이터베이스의 테이블을 생성, 수정, 삭제 또는 테이블 데이터의 내용을 생성, 수정, 삭제 시 사용하는 데이터베이스 질의(문법)이다. 쉽게 말해 데이터 작업을 위한 문법이다. 데이터를 다루고 싶다면 데이터베이스 종류에 맞는 쿼리문을 공부해야 한다. 하지만 다행스럽게도 쿼리문을 전혀 몰라도 된다. 왜냐하면 장고에는 ORM이라는 기능이 있기 때문이다. ORM은 파이썬으로 데이터 작업을 할 수 있게 해주는 기능이라고 생각하면 된다. 즉, 장고에서는 쿼리문을 몰라도 파이썬을 안다면 데이터를 다룰 수 있다.



**ORM은 데이터베이스 사용 방식의 단점 3가지를 제거한다**

전통적으로 데이터베이스를 사용하는 프로그램들은 데이터베이스의 데이터를 조회하거나 저장하기 위해 쿼리문을 사용해야 했다. 이 방식은 여전히 많이 사용되고 있는 방식이다. 하지만 이 전통적인 방식에는 몇 가지 단점이 있다. 첫 번째, 쿼리문은 **같은 목적으로 작성해도 개발자마다 다양한 쿼리문이 만들어지므로 통일성이 깨진다**. 두 번째, **개발자가 쿼리문을 잘못 작성하게 되면 시스템의 성능이 저하**될 수도 있다. 세 번째, **데이터베이스를 변경하면(MySQL → 오라클) 특정 데이터베이스에 의존하는 쿼리문을 모두 수정해야 하므로 유지 보수의 어려움**이 생긴다. 하지만 장고의 ORM은 데이터베이스의 테이블을 모델화하여 사용하기 때문에 위에서 열거한 단점이 모두 사라진다. ORM이 쿼리문을 자동으로 생성하므로 통일성이 보장된다. 그리고 쿼리문 자체를 잘못 작성할 가능성도 사라진다. 또한 데이터베이스에 맞게 자동으로 쿼리문을 생성해 주므로 쿼리문 수정 작업이 사라진다. 바로 이것이 ORM을 사용하는 이유이다.



# model 수정

1) 필드를 추가하는 경우

- 필드를 추가

- `python manage.py makemigrations`

  - non-nullable 속성에 대한 처리
  - models.DateTimeField의 경우, default=`timezon.now` 와 같은 값을 설정해준다.

- `python manage.py migrate`

  

2) 필드 삭제 또는 속성을 변경하는 경우

